services:
  app:
    build: .
    command: python run.py --server.port 80
    env_file:
      - .env
    environment:
      - TZ=Asia/Seoul
      - VIRTUAL_HOST=etf.dojason.com
      - LETSENCRYPT_HOST=etf.dojason.com
      - LETSENCRYPT_EMAIL=kimwootak@catholic.ac.kr
    volumes:
      - ./logs:/app/logs
      - ./cache:/app/cache
      - ./.streamlit:/app/.streamlit

  scheduler:
    build: .
    command: python aps.py
    env_file:
      - .env
    environment:
      - TZ=Asia/Seoul
    volumes:
      - ./logs:/app/logs
      - ./cache:/app/cache
