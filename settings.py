"""
전역 설정 파일

이 파일에서는 데이터베이스 연결 등 인프라 관련 설정을 정의합니다.
"""

import os

from dotenv import load_dotenv

# .env 파일이 있다면 로드합니다.
load_dotenv()
# --- 웹앱 UI 및 마스터 데이터 관련 설정 ---

APP_DATE_TIME = "2025-09-25-10"

APP_TYPE = os.environ.get("APP_TYPE", f"APP-{APP_DATE_TIME}")

# --- 슬랙 알림 스케줄 설정 ---
# 환경 변수가 있으면 그 값을 사용하고, 없으면 None이 됩니다.
# 여기에 직접 CRON 표현식을 문자열로 설정할 수도 있습니다. (예: "10 18 * * 1-5")
#
# [동작 방식]
# 이 설정은 메인 스케줄러(aps.py의 SCHEDULE_*_CRON)와 별개로 동작하는 '알림 필터'입니다.
# 1. 메인 스케줄러가 시그널 계산 작업을 실행합니다.
# 2. 작업 완료 후, 슬랙 알림을 보내기 직전에 현재 시간이 아래 NOTIFY_*_CRON 설정과 일치하는지 확인합니다.
# 3. 일치할 경우에만 상세/요약 알림이 발송됩니다.
#
# 예를 들어, 메인 스케줄러가 2시간마다 실행되고, NOTIFY_KOR_CRON이 1시간마다로 설정된 경우,
# 알림은 두 조건이 모두 맞는 2시간마다 발송됩니다.
# 이 설정이 비어있으면(None), 메인 스케줄러가 실행될 때마다 항상 알림이 발송됩니다.

NOTIFY_KOR_CRON = "0 9-16 * * 1-5"
NOTIFY_AUS_CRON = "0 9-16 * * 1-5"
NOTIFY_COIN_CRON = "*/10 * * * *"  # 10분마다
